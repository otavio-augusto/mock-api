#+title: /Controllers/

Estes são os /controllers/ do projeto.

Para entender a função dos /controllers/ no projeto, veja o seguinte:
#+begin_src plantuml :exports results :file .img/img1.png
@startuml
  component Model
  component View
  component Controller
  database Dados

interface response as "HTTP Response"
interface request as "HTTP Request"

component "Navegador" as navegador

navegador -> request: "     "
request --> Controller
Controller --> response
Model -> response: Serializa
response -> View: "     "
View -> navegador: Renderiza

Controller <-left-> Dados:"Read and Write"
@enduml
#+end_src

* User Controller
#+begin_src js :tangle userController.js
import { writeData, readData } from '../storage/storageDriver.js'
#+end_src
** Rotas
*** TODO GET
Por sua natureza, devem existir duas rotas ~GET~, uma para retornar todos os usuários, e outro para retornar um especifico.

Essas rotas foram denominadas plural e singular, respectivamente.
#+begin_src js :tangle userController.js
//ROTA GET PLURAL
export async function getUsers(req, res, next) {
  res.setHeader('Access-Control-Allow-Origin', '*');

  const message = await readData("users.json")
  res.status(201).json(message);
};

//ROTA GET SINGULAR
export async function getUser(req, res, next) {
  res.setHeader('Access-Control-Allow-Origin', '*');

  const message = await readData("users.json")

  message.filter((item) => {
    if (req.params.id == item.id)
      res.status(201).send(item);
  })
};
#+end_src
*** TODO PUT
#+begin_src js :tangle userController.js
export function putUser(req, res, next) {
  res.status(201).send("OK");
};
#+end_src
*** DONE POST
#+begin_src js :tangle userController.js
export async function postUser(req, res, next) {
  await writeData("users.json", req.body)
  res.status(201).send("GOT PUT!");
};
#+end_src
*** TODO DELETE
#+begin_src js :tangle userController.js
export function deleteUser(req, res, next) {
  const id = req.params.id
  const message = {
    "message": `DELETE USER ACKNOWLEDGED!`,
    "id": id
  }
  res.status(201).send(message);
};
#+end_src


* Theme Controller
** Rotas
*** TODO GET
#+begin_src js
export function getTheme(req, res, next){
  const id = req.params.id
  const message = {
    "message": "GET ACKNOWLEDGED!",
    "id": id
  }
  res.status(201).send(message);
}
#+end_src

#+RESULTS:

* COMMENT Metadados
#+PROPERTY: header-args :noeval
#+OPTIONS:
# local variables:
# ispell-local-dictionary: "pt_BR"
#+auto_tangle: t
# end:
